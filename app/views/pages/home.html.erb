<div class="container-fluid">
  <div class="row">
    <div class="col-4">
      <div>
        <%= render partial: "shared/search_form" %>
        <div>
          <% @all_collections.each do |collection| %>
            <%= render partial: "dashboard_collection_card", collection: collection %>
          <% end %>
        </div>
      </div>
      <%= form_with url: "/addcollectionwatchlist", method: :post, remote: true do |f| %>
        <%= f.label :slug %>
        <%= f.select :slug, @slugs %>
        <%= f.submit "Add to watchlist" %>
        <%= f.select :slug, @slugs, input_html: { data: { controller: 'select2' }}, id: 'add-collection-input' %>
      <% end %>
      <div id="search-results">
        test
      </div>
      <div class="tab-container mx-1 px-2 pb-2" >
        <ul class="nav nav-pills mb-0 justify-content-center" id="pills-tab" role="tablist">
          <li class="nav-item">
            <a class="nav-link text-white px-3">Portfolio</a>
          </li>
        </ul>
      </div>
      <div class="black-card-bg" style="background-color: #3b3b3b; overflow-y: scroll; height: 75vh;">
        <div class="nft-cards pt-3 w-100">
          <% @nfts.each do |nft| %>
            <%= render "shared/dashboard_nft_card", nft: nft%></a>
          <% end %>
        </div>
      </div>
    </div>
    <div class="col-4">
      <div class="tab-container mx-1 px-2 pb-2" >
        <ul class="nav nav-pills mb-0 justify-content-center" id="pills-tab" role="tablist">
          <li class="nav-item">
            <a class="nav-link text-white px-2 active" id="pills-collection-tab" href="#pills-collection"  data-toggle="pill" role="tab" aria-selected="true">Collection Watchlist</a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white px-2" id="pills-individual-tab" data-toggle="pill" href="#pills-individual" role="tab" aria-selected="false">Individual Watchlist</a>
          </li>
        </ul>
      </div>
      <div class="tab-content" id="pills-tabContent">
        <div class="black-card-bg mx-auto pt-6 tab-pane fade show active" id="pills-collection" style="background-color: #3b3b3b; overflow-y: scroll; height:75vh;">
          <div class="pt-3">
            <div class="my-2 py-2 px-1 mx-auto" id='add-watchlist-collection-button' style="background-color:#14142a; height: 150px; width: 350px; border-radius: 12px;">
              <div id="add-collection-to-watchlist" class="d-flex h-100 flex-column justify-content-center align-items-center">
                <p>Add collection to watchlist</p>
                <button type="button" class="btn text-white" data-toggle="modal" data-target="#exampleModal">
                  <i class="far fa-plus-square d-block align-middle text-center" style="font-size:2rem;"></i>
                </button>
                <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                  <div class="modal-dialog mw-100 w-75" role="document">
                    <div class="modal-content bg-dark">
                      <div class="modal-header">
                        <h5 class="modal-title text-dark" id="exampleModalLabel">Add Collection to Watchlist</h5>
                      </div>
                      <div class="modal-body">
                        <%= form_with url: "/addcollectionwatchlist", method: :post, remote: true do |f| %>
                          <%= f.label :slug %>
                          <%= f.select :slug, @slugs %>
                          <%= f.submit "Add to watchlist" %>
                        <% end %>
                      </div>
                      <div class="row">
                        <% @all_collections.each do |collection| %>
                          <div class="col-6">
                            <%= render 'shared/dashboard_collection_card', collection: collection%>
                          </div>
                        <% end %>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <% @collections.each do |collection| %>
              <%= render 'shared/dashboard_collection_card', collection: collection%>
            <% end %>
          </div>
        </div>
        <div class="black-card-bg mx-auto pt-6 tab-pane fade" id="pills-individual" style="background-color: #3b3b3b; overflow-y: scroll; height:75vh;">
          <div class="nft-cards pt-3 w-100">
            <% @watchlist_nfts.each do |nft| %>
              <%= render "shared/dashboard_nft_card", nft: nft %></a>
            <% end %>
          </div>
        </div>
      </div>
    </div>
    <div class="col-4">
      <div>
        <div class="tab-container mx-1 px-2 pb-2" >
          <ul class="nav nav-pills mb-0 justify-content-center" id="pills-tab" role="tablist">
            <li class="nav-item">
              <a class="nav-link text-white px-3">News</a>
            </li>
          </ul>
        </div>
        <div class="black-card-bg" style="background-color: #3b3b3b; overflow-y: scroll; height: 75vh;">
          <div class="nft-cards">
            <% @articles.each do |article| %>
              <%= render "shared/news_card", article: article %>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
